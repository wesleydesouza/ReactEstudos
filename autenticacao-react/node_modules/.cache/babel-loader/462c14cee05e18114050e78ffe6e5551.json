{"ast":null,"code":"var _jsxFileName = \"/home/wesley/\\xC1rea de Trabalho/cursos/ReactEstudos/autenticacao-react/src/pages/Cadastro/index.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport Lottie from \"react-lottie\";\nimport { Image, Container, Form, Input, Button, Animation, Signup, Span, ForgotPassword, Title } from \"./styles\";\nimport api from \"../../services/api\";\nimport SignupValidation from \"../../utils/validation/SignupValidation \";\nimport Message from \"../../components/Message\";\nimport * as animationData from '../../assets/animations/88796-loading-animation-gradient-line-1.json';\nimport successAnimation from \"../../assets/animations/67000-checkmark.json\";\nimport Logo from \"../../assets/images/logo.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Cadastro() {\n  _s();\n\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const optionsLoading = {\n    loop: true,\n    autoplay: true,\n    animationData: animationData,\n    rendererSettings: {\n      preserveAspectRatio: 'xMidYMid slice'\n    }\n  };\n\n  async function HandleSubmit() {\n    setLoading(true);\n    const data = {\n      email,\n      name,\n      password,\n      phone\n    };\n\n    try {\n      await SignupValidation(data);\n      handleRequest(data);\n    } catch (err) {\n      setLoading(false);\n      Message(err.errors[0]);\n    }\n\n    async function handleRequest(data) {\n      await api.post(\"/user\", data).then(response => {\n        Message(response.data.message);\n        setTimeout(() => {\n          setLoading(false);\n          setSuccess(true);\n        }, 2000);\n      }).catch(error => {\n        Message(error.response.statusText = \"Usuário não encontrado!\", \"warn\");\n        setTimeout(() => {\n          setLoading(false);\n        }, 2000);\n      });\n    }\n  }\n\n  async function handleAuthenticated() {\n    let token = await localStorage.getItem(\"over_token\");\n\n    if (token) {\n      window.location = \"/\";\n    }\n  }\n\n  useEffect(() => {\n    handleAuthenticated();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: success ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Deu certo!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 27\n    }, this) : /*#__PURE__*/_jsxDEV(Form, {\n      children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Image, {\n        src: Logo,\n        alt: \"logo web\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Title, {\n        children: \"Cadastre-se!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"text\",\n        placeholder: \"Nome\",\n        onChange: e => setName(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"email\",\n        placeholder: \"E-mail\",\n        onChange: e => setEmail(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"number\",\n        placeholder: \"Celular\",\n        onChange: e => setPhone(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        placeholder: \"Password\",\n        onChange: e => setPassword(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(ForgotPassword, {\n        href: \"/forgot-password\",\n        children: \"Esqueceu sua senha?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: HandleSubmit,\n        children: loading ? /*#__PURE__*/_jsxDEV(Animation, {\n          children: /*#__PURE__*/_jsxDEV(Lottie, {\n            options: optionsLoading,\n            height: 40,\n            width: 40\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 29\n        }, this) : \"Entrar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Signup, {\n        href: \"/signup\",\n        children: [\"Ainda n\\xE3o tem cadastro? \", /*#__PURE__*/_jsxDEV(Span, {\n          children: \"Cadastre-se!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 72\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Cadastro, \"qu6mkz03lmTRZZT7luwtdIMY8i0=\");\n\n_c = Cadastro;\n;\nexport default Cadastro;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cadastro\");","map":{"version":3,"sources":["/home/wesley/Área de Trabalho/cursos/ReactEstudos/autenticacao-react/src/pages/Cadastro/index.js"],"names":["useEffect","useState","ToastContainer","Lottie","Image","Container","Form","Input","Button","Animation","Signup","Span","ForgotPassword","Title","api","SignupValidation","Message","animationData","successAnimation","Logo","Cadastro","name","setName","email","setEmail","phone","setPhone","password","setPassword","loading","setLoading","success","setSuccess","optionsLoading","loop","autoplay","rendererSettings","preserveAspectRatio","HandleSubmit","data","handleRequest","err","errors","post","then","response","message","setTimeout","catch","error","statusText","handleAuthenticated","token","localStorage","getItem","window","location","e","target","value"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport Lottie from \"react-lottie\";\n\nimport {Image, Container, Form, Input, Button, Animation, Signup, Span, ForgotPassword, Title} from \"./styles\";\nimport api from \"../../services/api\"\nimport SignupValidation from \"../../utils/validation/SignupValidation \";\nimport Message from \"../../components/Message\";\n\nimport * as animationData from '../../assets/animations/88796-loading-animation-gradient-line-1.json';\nimport successAnimation from \"../../assets/animations/67000-checkmark.json\";\nimport Logo from \"../../assets/images/logo.png\";\nfunction Cadastro(){\n    const [name, setName] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [phone, setPhone] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [loading, setLoading] = useState(false);\n    const [success, setSuccess] = useState(false);\n\n    const optionsLoading = {\n        loop: true,\n        autoplay: true, \n        animationData: animationData,\n        rendererSettings: {\n          preserveAspectRatio: 'xMidYMid slice'\n        }\n      };\n\n    async function HandleSubmit(){\n        setLoading(true);\n       const data = { email, name, password, phone};\n\n       try {\n\n           await SignupValidation(data);\n           handleRequest(data);\n           \n       } catch(err){\n        setLoading(false);\n        Message(err.errors[0]);\n       }\n        \n       async function handleRequest(data) {\n           await api.post(\"/user\", data)\n           .then(response => {\n               Message(response.data.message);\n               setTimeout(() => {\n                   setLoading(false);\n            setSuccess(true);\n        }, 2000);\n     }).catch(error => {\n       \n         Message(error.response.statusText = \"Usuário não encontrado!\", \"warn\");\n         setTimeout(() => {\n            setLoading(false)\n        }, 2000);\n     })\n       }\n       \n        }\n\n        async function handleAuthenticated(){\n            let token = await localStorage.getItem(\"over_token\");\n\n            if(token){\n                window.location = \"/\";\n            }\n        }\n        useEffect(() => {\n            handleAuthenticated()\n        },[])\n        \n    return(\n        <Container>\n            {\n                success ? <h1 >Deu certo!</h1>\n\n                :\n\n                <Form>\n                    <ToastContainer/>\n                    <Image src={Logo} alt=\"logo web\"/>\n    \n                    <Title>Cadastre-se!</Title>\n                    <Input type=\"text\" placeholder=\"Nome\" onChange={(e) => setName(e.target.value)}  required/>\n                    <Input type=\"email\" placeholder=\"E-mail\" onChange={(e) => setEmail(e.target.value)}  required/>\n                    <Input type=\"number\" placeholder=\"Celular\" onChange={(e) => setPhone(e.target.value)}  required/>\n                    <Input type=\"password\" placeholder=\"Password\" onChange={(e) => setPassword(e.target.value)} required/>\n                    <ForgotPassword href=\"/forgot-password\">\n                        Esqueceu sua senha?\n                    </ForgotPassword>\n                    <Button \n                        onClick={HandleSubmit}\n                        >\n                            {loading ? \n                            <Animation>\n    \n                                <Lottie options={optionsLoading}\n                                    height={40}\n                                    width={40}\n                                />\n                            </Animation>\n                        :\n                            \"Entrar\"\n                        }\n                    </Button>\n                        <Signup href=\"/signup\">Ainda não tem cadastro? <Span>Cadastre-se!</Span></Signup>\n                    \n                </Form>\n\n    \n            }\n\n        </Container>\n    )\n};\n\nexport default Cadastro;"]},"metadata":{},"sourceType":"module"}